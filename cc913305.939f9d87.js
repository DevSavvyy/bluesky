(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{149:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return b})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return i})),n.d(t,"default",(function(){return s}));var a=n(1),c=n(9),r=(n(0),n(160)),b={id:"database",title:"Database Component",sidebar_label:"Database"},l={id:"core/database",title:"Database Component",description:"<div style={{ width: 'fit-content', margin: 'auto', textAlign: 'center' }}>\r",source:"@site/docs\\core\\database.md",permalink:"/bluesky/docs/core/database",editUrl:"https://github.com/Alzar/bluesky/edit/documentation/docs/core/database.md",sidebar_label:"Database",sidebar:"someSidebar",previous:{title:"Proxy Component",permalink:"/bluesky/docs/core/proxy"},next:{title:"Callbacks Component",permalink:"/bluesky/docs/core/callbacks"}},i=[{value:"Required Attributes",id:"required-attributes",children:[{value:"<strong>Server</strong>:",id:"server",children:[]}]},{value:"Methods",id:"methods",children:[{value:"<strong>Server</strong>",id:"server-1",children:[]},{value:"<strong>Client</strong>",id:"client",children:[]}]},{value:"Events",id:"events",children:[{value:"<strong>Server</strong>",id:"server-2",children:[]},{value:"<strong>Client</strong>",id:"client-1",children:[]}]},{value:"Query Table",id:"query-table",children:[]},{value:"Other Helpful Tips",id:"other-helpful-tips",children:[]}],o={rightToc:i};function s(e){var t=e.components,n=Object(c.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},o,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("div",{style:{width:"fit-content",margin:"auto",textAlign:"center"}},Object(r.b)("table",null,Object(r.b)("tr",null,Object(r.b)("td",{colspan:"2"},"Component Available")),Object(r.b)("tr",null,Object(r.b)("td",null,"Server"),Object(r.b)("td",null,"Yes")),Object(r.b)("tr",null,Object(r.b)("td",null,"Client"),Object(r.b)("td",null,"No")))),Object(r.b)("p",null,"This is the default Database wrapper that we use, this is a modified version of ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/dcr30/fivem-mongodb"}),"fivem-mongodb"),"."),Object(r.b)("h2",{id:"required-attributes"},"Required Attributes"),Object(r.b)("hr",null),Object(r.b)("h3",{id:"server"},Object(r.b)("strong",{parentName:"h3"},"Server"),":"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"isConnected: function")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"insert: function")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"insertOne: function")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"find: function")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"findOne: function")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"update: function")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"updateOne: function")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"delete: function")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"deleteOne: function")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"count: function"))),Object(r.b)("h2",{id:"methods"},"Methods"),Object(r.b)("hr",null),Object(r.b)("h3",{id:"server-1"},Object(r.b)("strong",{parentName:"h3"},"Server")),Object(r.b)("h4",{id:"isconnected"},Object(r.b)("inlineCode",{parentName:"h4"},"isConnected")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Parameters"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"None"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Return"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"boolean"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Description"),": ",Object(r.b)("span",{style:{color:"#cecece"}},"Return wether or not there is an active connection to the database"))),Object(r.b)("h4",{id:"insert"},Object(r.b)("inlineCode",{parentName:"h4"},"insert")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Parameters"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"params: table, callback: function"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Return"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"table"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Description"),": ",Object(r.b)("span",{style:{color:"#cecece"}},"Inserts a list of items into the specified collection."))),Object(r.b)("h4",{id:"insertone"},Object(r.b)("inlineCode",{parentName:"h4"},"insertOne")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Parameters"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"params: table, callback: function"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Return"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"table"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Description"),": ",Object(r.b)("span",{style:{color:"#cecece"}},"Inserts a single item into the specified collection."))),Object(r.b)("h4",{id:"find"},Object(r.b)("inlineCode",{parentName:"h4"},"find")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Parameters"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"params: table, callback: function"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Return"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"table"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Description"),": ",Object(r.b)("span",{style:{color:"#cecece"}},"Returns all documents that match the query."))),Object(r.b)("h4",{id:"findone"},Object(r.b)("inlineCode",{parentName:"h4"},"findOne")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Parameters"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"params: table, callback: function"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Return"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"table"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Description"),": ",Object(r.b)("span",{style:{color:"#cecece"}},"Returns the first document that match the query."))),Object(r.b)("h4",{id:"update"},Object(r.b)("inlineCode",{parentName:"h4"},"update")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Parameters"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"params: table, callback: function, isUpdateOne: boolean"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Return"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"table"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Description"),": ",Object(r.b)("span",{style:{color:"#cecece"}},"Updates all documents that match the filter if ",Object(r.b)("inlineCode",{parentName:"li"},"isUpdateOne")," is false, or updates the first document that matches the filter if ",Object(r.b)("inlineCode",{parentName:"li"},"isUpdateOne")," true"))),Object(r.b)("h4",{id:"updateone"},Object(r.b)("inlineCode",{parentName:"h4"},"updateOne")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Parameters"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"params: table, callback: function"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Return"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"table"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Description"),": ",Object(r.b)("span",{style:{color:"#cecece"}},"Updates the first document that matches the filter."))),Object(r.b)("h4",{id:"delete"},Object(r.b)("inlineCode",{parentName:"h4"},"delete")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Parameters"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"params: table, callback: function"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Return"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"table"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Description"),": ",Object(r.b)("span",{style:{color:"#cecece"}},"Deletes all documents that match the filter."))),Object(r.b)("h4",{id:"deleteone"},Object(r.b)("inlineCode",{parentName:"h4"},"deleteOne")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Parameters"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"params: table, callback: function"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Return"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"table"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Description"),": ",Object(r.b)("span",{style:{color:"#cecece"}},"Deletes the first document that match the filter."))),Object(r.b)("h4",{id:"count"},Object(r.b)("inlineCode",{parentName:"h4"},"count")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Parameters"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"params: table, callback: function"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Return"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"int"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Description"),": ",Object(r.b)("span",{style:{color:"#cecece"}},"Counts the number of documents that match the filter."))),Object(r.b)("h3",{id:"client"},Object(r.b)("strong",{parentName:"h3"},"Client")),Object(r.b)("p",null,"This component has no client methods."),Object(r.b)("h2",{id:"events"},"Events"),Object(r.b)("hr",null),Object(r.b)("h3",{id:"server-2"},Object(r.b)("strong",{parentName:"h3"},"Server")),Object(r.b)("h4",{id:"databaseserverready"},Object(r.b)("inlineCode",{parentName:"h4"},"Database:Server:Ready")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Sent Values"),": ",Object(r.b)("span",{style:{color:"#cecece"}},Object(r.b)("inlineCode",{parentName:"li"},"None"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Description"),": ",Object(r.b)("span",{style:{color:"#cecece"}},"Indicates both authentication & game databases are connected."))),Object(r.b)("h3",{id:"client-1"},Object(r.b)("strong",{parentName:"h3"},"Client")),Object(r.b)("p",null,"No client events are fired from this component."),Object(r.b)("h2",{id:"query-table"},"Query Table"),Object(r.b)("hr",null),Object(r.b)("p",null,"All of the methods in this component are expecting a table that has all of the query data for MongoDB. Below are some examples of how certain operations are done."),Object(r.b)("h4",{id:"insert-1"},"Insert"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-Lua"}),"exports['bs_base']:FetchComponent('Database'):insertOne({ \n    collection = 'somecollection',\n    document = {\n        SomeKey = 'SomeData',\n        int = 0,\n        bool = true,\n        table = {\n            something = 'something'\n        },\n    }\n}, function (success, result, insertedIds)\n    if not success then return end\n\n    -- Do stuff here\nend)\n")),Object(r.b)("h4",{id:"find-1"},"Find"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-Lua"}),"exports['bs_base']:FetchComponent('Database'):findOne({\n    collection = 'somecollection',\n    query = {\n        SomeKey = 'SomeData'\n    }\n}, function (success, results)\n    if not success then return end\n\n    -- Do stuff here\nend)\n")),Object(r.b)("h4",{id:"update-1"},"Update"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-Lua"}),"exports['bs_base']:FetchComponent('Database'):updateOne({\n    collection = 'somecollection',\n    query = {\n        SomeKey = 'SomeData',\n    }, \n    update = { \n        [\"$set\"] = { \n            SomeKey = 'SomeOtherData'\n        }\n    }\n})\n")),Object(r.b)("h4",{id:"delete-1"},"Delete"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-Lua"}),"exports['bs_base']:FetchComponent('Database'):deleteOne({\n    collection = 'somecollection',\n    query = {\n        SomeKey = 'SomeOtherData'\n    }\n}, function (success, results)\n    if not success then return end\n\n    -- Do stuff here\nend)\n")),Object(r.b)("h4",{id:"count-1"},"Count"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-Lua"}),"exports['bs_base']:FetchComponent('Database'):count({\n    collection = 'somecollection',\n    query = {\n        SomeKey = 'SomeData'\n    }\n}, function (success, count)\n    if not success then return end\n\n    -- Do stuff here\nend)\n")),Object(r.b)("h2",{id:"other-helpful-tips"},"Other Helpful Tips"),Object(r.b)("hr",null),Object(r.b)("h4",{id:"ordering"},"Ordering"),Object(r.b)("p",null,"You may want to order your results, achieving this is very simple and just requires passing an options table in the query. ",Object(r.b)("inlineCode",{parentName:"p"},"1")," is to order ascending, and ",Object(r.b)("inlineCode",{parentName:"p"},"-1")," is order descending"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-Lua"}),"exports['bs_base']:FetchComponent('Database'):findOne({\n    collection = 'somecollection',\n    query = {\n        SomeKey = 'SomeData'\n    },\n    options = {\n        filter = {\n            SomeKey = -1\n        }\n    }\n}, function (success, results)\n    if not success then return end\n\n    -- Do stuff here\nend)\n")),Object(r.b)("p",null,"Should you need to do anything else that isn't covered in this document, refer to the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.mongodb.com/"}),"MongoDB Documentation")))}s.isMDXComponent=!0},160:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),c=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var o=c.a.createContext({}),s=function(e){var t=c.a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},p=function(e){var t=s(e.components);return c.a.createElement(o.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return c.a.createElement(c.a.Fragment,{},t)}},O=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,b=e.parentName,o=i(e,["components","mdxType","originalType","parentName"]),p=s(n),O=a,m=p["".concat(b,".").concat(O)]||p[O]||u[O]||r;return n?c.a.createElement(m,l({ref:t},o,{components:n})):c.a.createElement(m,l({ref:t},o))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,b=new Array(r);b[0]=O;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:a,b[1]=l;for(var o=2;o<r;o++)b[o]=n[o];return c.a.createElement.apply(null,b)}return c.a.createElement.apply(null,n)}O.displayName="MDXCreateElement"}}]);